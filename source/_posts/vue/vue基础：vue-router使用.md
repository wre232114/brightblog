---
title: vue基础：vue-router使用
date: 2019-07-10 21:50:28
tags:
- vue
- vue-router

category:
- vue
- vue-router
---

## 简介
vue-router时vue.js的官方路由，与vue核心深度集成，提供了特性：
* 嵌套路由/视图匹配
* 模块化、基于组件的路由配置
* 路由参数、query、通配符
* vue过渡系统驱动的视图过渡效果
* 细密度的导航控制
* 自动激活CSS class的链接
* HTML5 history模式或者hash模式，回退IE9方案
* 定制scroll bar的行为

### 路由原理浅析
vue.js只是一个响应式的框架，通过vue模板配合响应式系统，可以创建数据驱动的单页网站；通过改变数据，就可以改变视图。但是这只是单页程序，点击了页面的一个按钮，可能切换成了另一个界面，这实际上只是vue的组件在切换，Vue会根据数据来改变DOM；如果有多个界面切换，我们需要记住当前是哪个界面，然后判断需要向哪一个界面切换，然后切换不同的组件实现页面切换。但是这样需要在组件中记录界面状态，而且刷新浏览器后一切归0。

这时候我们自然而然就会想将`组件切换`这一部分能力提取出来，不然每个程序都需要单独编写切换代码。不同的界面我们习惯用不同的路由来表示，我们是不是可以将`路由`和`组件切换`结合起来呢？建立`路由`到`组件`的映射关系，我们就可以实现根据路由来切换组件，以实现不同界面的切换。但是我们这里的路由和传统浏览器路由是有区别的，因为Vue应用是`单页应用`，浏览器只会返回一份HTML、CSS、JS代码，其他的所有都交给js处理。所以我们的路由在改变的时候，不能触发浏览器更新——这样会导致当前网站的一切状态清零。

这种单页路由有两种解决方案，一种是将路由放在hash种，因为hash不会导致浏览器刷新重新从服务器获取数据；另一种是html History API，因为`history.pushState`API会改变浏览器路由，但是不会刷新浏览器；html History API需要而外的配置，因为当用户手动刷新浏览器的时候，传给服务器的是新的路由，这时候需要web服务器兼容各种路由的情况（可以直接返回一个同一个文档）。

前面提到通过建立路由和组件的映射关系，可以实现根据路由来切换组件实现页面调转，那么切换的是哪一个组件呢？Vue Router提供了`<router-view>`组件，`<router-view>`会自动匹配路由的层级，并将路由对应的组件渲染到`<router-view>`的位置。当路由改变时，在`<router-view>`的基础上切换组件。

映射关系通过初始化router的时候建立，通过配置对象确定路由和组件的关系以及嵌套关系。
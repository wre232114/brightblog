---
title: MySQL数据类型
date: 2019-09-25 06:33:44
tags:
- 数据库
- mysql

category:
- 数据库
- mysql
---

这篇文章主要介绍mysql的数据类型，基于《MySQL技术内幕》的第三章，主要内容是mysql中的详细数据类型、类型转换以及如何对数据进行处理。

## 要点总结
* 数据值类别：mysql数据库中能够存储如下类别的数据
  * 数值：包括整数、浮点数、和位域值。其中整数和浮点数可以分成精确值和近似值，用科学计数法（例如.158E8）表示的是近似值，4、1.25这样形式表示的精确值。近似值会有舍入误差，精确值的近似结果是精确的。
  * 字符串值：例如'123ss'，可以值单引号或者双引号（尽量使用单引号）。可以只用\转义（例如\',\t），使用`''`也可以转义单引号
  * 日期时间值：可以单独日期和时间，例如（'2012-06-17'、'12:30:43），也可以组合在一起（'2008-06-15 10:30:12.5）
  * 空间值：例如(10,20)这种表示平面中坐标系的
  * 布尔值：常量TRUE和FALSE，分别表示1和0。表达式中的0表示FALSE，非0、非NULL表示真
* mysql数据类型
  * 数字类型：
    * TINYINT
    * SMALLINT
    * MEDIUMINT
    * INT
    * BIGINT
    * DECIMAL
    * FLOAT
    * DOUBLE
    * BIT
  * 字符串类型：
    * CHAR
    * VARCHAR
    * BINARY
    * VARBINARY
    * TYNYBLOB
    * BLOB
    * MEDIUMBLOB
    * LONGBLOB
    * TINYTEXT
    * TEXT
    * MEDIUMTEXT
    * LONGTEXT
    * ENUM
    * SET
  * 时态类型：
    * DATE: 'YYYY-MM-DD'
    * TIME: 'hh:mm:ss'
    * DATETIME: 'YYYY-MM-DD hh:mm:ss'
    * TIMESTAMP: 'YYYY-MM-DD hh:mm:ss'
    * YEAR: YYYY或YY
## 数据值类别
MySQL支持多种常规类别的数据值。其中包括数值、字符串值、日期/时间这样的时态值、空间值，以及NULL值。

### 数值
MySQL能够识别的数字标阔整数、定点数或者浮点数，以及位阈值。

#### 精确值数和近似值数
MySQL支持对精确值进行精确运算，以及对近似值的近似运算。**精确值包括整数（如0、14、-382）和带小数点的数（0.0、38.5、-18.247）；近似值是采用科学计数法表示的浮点数，他们带有一个底数和一个指数（如1.58E5、-1.58E5）**。

整数可以用十进制和16进制两种格式来表示。**16进制默认为字符串，但在数值运算的时候，十六进制常量会被视为64位的整数。例如，0x10==16**

小数精确值由三部分组成：整数部分、小数点、小数部分，其中整数部分和小数部分都是数字序列。小数点前后的数字序列可以有一个为空，但是不能同时为空。

**16进制不能用科学计数法来表示**

精确值运算后得到的值也是精确的，只要没有超出精度。近似值的计算是近似的，会有舍入误差。MySQL按照以下规则决定使用精确计算还是近似计算：
* 只要表达式里有近似值，就会当作浮点（近似）表达式来计算
* 如果表达式只包含整数精确值，但其中的值带有小数部分，那么它会以BIGINT（64位）精度来计算
* 如果表达式只包含精确值，但是有小数，会按照65位decimal算法来计算
* 在表达式里，如果存在字符串必须转换成一个数才能进行计算的情况，那么该字符串会被转换成一个双精度浮点值。该表达式进行近似计算。

#### 位域值
位阈值可以写成b'val'或者0bval，其中，bal是一个或者多个0/1组成的数字序列。例如b'1001'或0b1001表示9。

在结果集里面，BIT值会被显示为一个二进制串。将BIT结果+0，或者使用CAST()函数，可以将其转化为一个整数。
```mysql
select b'1001' + 0, CAST(0b1001 AS UNSIGNED);
```

### 字符串值
字符串两端的引号既可以是单引号，也可以是双引号。**但是推荐使用单引号：**
* SQL标准规定使用单引号
* 如果启用了SQL模式ANSI_QUOTES，那么mysql会将双引号引起来的值处理成标识符，代表数据库中的表名、数据库名或者表的列名等等。例如，如果开启了ANSI_QUOTES模式，`SELECT "last_name" from president;`中的`"last_name"`会被视为president表中`last_name`字段，而不是一个字符串常量。

上面原因的第二个，两种结果天差地别，如果`"last_name"`被当成常量，那么选出来的结果中有一列就是常量，值就是`"last_name"`。如果当成标识符，选的是president表中的last_name字符串的值。

MySQL能够识别出字符串里用来代表特殊字符的转义序列：`\0, \', \", \b, \n, \r, \t, \\, \z`。如果向取消反斜线字符的特殊含义，并把他当作一个普通的字符，需要启用SQL的NO_BACKSLASH_ESCAPE模式。转义序列区分大小写。不是上列转义字符，如果加上`\`，会被解释成原字符。

#### 字符串的16进制表示法
有两种16进制的字符串表示法，一种是X'val'，`val`是16进制串，`x`和`val`都中的字母都不区分大小写。例如X'4A'表示J：
```sql
mysql> select X'4A', x'4a';
+-------+-------+
| X'4A' | x'4a' |
+-------+-------+
| J     | J     |
```
在字符串上下文中16进制串当作字符串，在数字上下文中，16进制串当作数字：
```sql
mysql> select X'4A', x'4a';
+-------+-------+
| X'4A' | x'4a' |
+-------+-------+
| J     | J     |
```

另一种就是`0x`开头的16进制表示法，例如`0x0a`，其中`0x`只能是小写。16进制默认是字符串，当用于数字/数学运算时，被解析成64位整数。
```sql
mysql> select 0x61626364, 0x61626364+0;
+------------+--------------+
| 0x61626364 | 0x61626364+0 |
+------------+--------------+
| abcd       |   1633837924 |
+------------+--------------+
```
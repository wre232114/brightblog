<!DOCTYPE html>
<html>

  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
    <title>
      
        ucore-os思考与总结 |
          
            Bright的个人博客
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/css/reset.css">
      <link rel="stylesheet" href="/css/style.css">
        <link rel="stylesheet" href="/css/github-markdown.css">
          <link rel="stylesheet" href="/css/atom-one-dark.css">
            
</head>

    <body>
      
        <header id="header" class="card">
  <span class="logo">B</span>
  <span class="motto">技术 & 梦想 |&nbsp;学习 & 总结</span>
  <nav>
    <ul>
    
      <li>
        <a href="/">首页 </a>
      </li>
    
      <li>
        <a href="/archives">归档 </a>
      </li>
    
      <li>
        <a href="/categories">分类 </a>
      </li>
    
      <li>
        <div class="search-input">
          <i class="fa search"></i>
          <input id="search-input" type="text">
        </div>
      </li>
    </ul>
  </nav>
</header>
          <main id="main">
            
              
<aside id="left-sidebar" class="margin-right">
  <nav class="card sidebar-component">
  <div class="card-title">文章归档</div>
  <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">30</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">2</span></li></ul>
</nav>
  <nav class="card sidebar-component">
  <div class="card-title">文章分类</div>
  <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a><span class="category-list-count">10</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/css/css基础/">css基础</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/css工具/">css工具</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/less/">less</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/sass/">sass</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/docker/docker-swarm/">docker swarm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/docker基础/">docker基础</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html5/">html5</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/html5/dom/">dom</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html5/html5-API/">html5 API</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html5/html5标签和属性/">html5标签和属性</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html5/svg/">svg</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html5/tips/">tips</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html5/实战/">实战</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring实战/">spring实战</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/js/js基础/">js基础</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/typescript/">typescript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/正则表达式/">正则表达式</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/工具/">工具</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/npm/">npm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/命令行工具/">命令行工具</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring-boot/">spring-boot</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/spring-boot/开发工具/">开发工具</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/typescript/">typescript</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/typescript/踩坑指南/">踩坑指南</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a><span class="category-list-count">11</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/vue/cli/">cli</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/tips/">tips</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/vue-router/">vue-router</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/vue实战/">vue实战</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/vue组件开发/">vue组件开发</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/基础/">基础</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/">webpack</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/webpack基础/">webpack基础</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/xml/">xml</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/xml/基础/">基础</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习打卡/">学习打卡</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/安全/">安全</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/安全/密码技术/">密码技术</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a><span class="category-list-count">23</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/shell/">shell</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/ucore/">ucore</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/操作系统原理/">操作系统原理</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">10</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/mysql/">mysql</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/sql语句/">sql语句</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/导论/">导论</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/数据库编程/">数据库编程</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/数据库设计/">数据库设计</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构/">数据结构</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构/图/">图</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/毕设/">毕设</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a><span class="category-list-count">20</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/算法/leetcode/">leetcode</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/模式匹配/">模式匹配</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/深度优先搜索/">深度优先搜索</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/">编程语言</a><span class="category-list-count">20</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/C/">C</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/C/语言/">语言</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/C语言/">C语言</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/Java/">Java</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/java/">java</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/英语/">英语</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/英语/生词/">生词</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机网络/">计算机网络</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/计算机网络/wireshark/">wireshark</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机网络/问题记录/">问题记录</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/交给子类/">交给子类</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/生成实例/">生成实例</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/适应设计模式/">适应设计模式</a><span class="category-list-count">2</span></li></ul></li></ul>
</nav>
  <nav class="card sidebar-component">
  <div class="card-title">最近文章</div>
  <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/05/19/algorithm/leetcode/动态规划/interleaving-string/">interleaving string</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/17/algorithm/leetcode/分治/maximum-product-subarray/">maximum product subarray</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/15/algorithm/leetcode/动态规划/triangle/">triangle</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/12/algorithm/leetcode/动态规划/unique-binary-search-trees-ii/">unique binary search trees ii</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/11/algorithm/leetcode/动态规划/decode-ways/">decode-ways</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/09/algorithm/leetcode/动态规划/unique-path-II/">unique path II</a></li></ul>
</nav>
</aside>


                <!--
<aside id="right-sidebar">
  <nav class="card margin-bottom">
  
</nav>
</aside>

-->
                <article id="article" class="margin-right ofhidn">
                  <article class="post-article article markdown-body">
  <h1>
    ucore-os思考与总结
  </h1>
  <hr>
  <h2 id="2019-6-24"><a href="#2019-6-24" class="headerlink" title="2019.6.24"></a>2019.6.24</h2><p>开始着手操作系统的学习和开发，需要了解的知识有很多很多，需要了解linux开发环境，包括linux命令、shell脚本、linux下的编译器gcc的使用（包括gcc的编译选项、makefile的使用、gcc混合编译——内联汇编——c和汇编），还有C语言的细节，结构、函数指针，还有算法、数据结构，还有硬件底层的知识，x86下CPU的工作模式，实模式和保护模式，mmu内存管理硬件单元，分段分页，特殊寄存器，中断处理。操作系统一般都是一个较大型的项目，能够锻炼大型项目的编程能力。一定要坚持下来，可能知识会多一点，但是学到的东西一定会更多！</p>
<p>接下来要一步一步来，首先要把基础学好，linux命令行和shell脚本编程以及gcc、makefile的使用，第一步首先弄清楚ucore整体的编译过程，它用到了linux和gcc makefile的细节都要搞清楚，并做好笔记。</p>
<p>然后开始进行操作系统内核的开发，了解操作系统的硬件基础、内核的工作原理。</p>
<p>然后在进行操作系统顶层的开发。</p>
<p>完成了这些之后，综合内核和已有的库进行扩展，进行网络协议实现等基础设施的建设，希望最终能做出一个带图形界面的完整移动操作系统！</p>
<h2 id="问题记录"><a href="#问题记录" class="headerlink" title="问题记录"></a>问题记录</h2><h3 id="gnu-ld链接器的工作原理？"><a href="#gnu-ld链接器的工作原理？" class="headerlink" title="gnu ld链接器的工作原理？"></a>gnu ld链接器的工作原理？</h3><ol>
<li>如何进行链接？</li>
<li>链接后的地址如何分配？链接指定的地址有什么用，例如0x7c00？</li>
<li>链接后生成的文件的格式？格式各部分和操作系统的关系？</li>
<li>linux上的可执行文件和生成的在硬件上的可执行文件（例如bootloader和操作系统内核）的区别？</li>
</ol>
<h3 id="如何使用objdump、objcopy等工具？"><a href="#如何使用objdump、objcopy等工具？" class="headerlink" title="如何使用objdump、objcopy等工具？"></a>如何使用objdump、objcopy等工具？</h3><ol>
<li>objdump等工具用于什么对象？</li>
<li>这些工具有哪些作用？</li>
</ol>
<h3 id="汇编语言的知识？"><a href="#汇编语言的知识？" class="headerlink" title="汇编语言的知识？"></a>汇编语言的知识？</h3><ol>
<li>代码段？数据段？和操作系统还有硬件的关系？</li>
<li>.code16和.code32的细节？</li>
<li>lgdtr的细节？</li>
<li>.long .word的细节？</li>
</ol>
<h3 id="GCC下如何编译-s文件？"><a href="#GCC下如何编译-s文件？" class="headerlink" title="GCC下如何编译.s文件？"></a>GCC下如何编译.s文件？</h3><p>和编译.o文件一样，直接使用gcc命令，编译得到.o文件。将汇编得到的.o文件和c得到的.o文件进行链接，可以生成可执行文件。这样就能将C和汇编混合编译。在汇编中能够直接使用C函数名作为标签名，链接后会找到C文件中对应的函数。</p>
<h3 id="BIOS提供的功能和作用？"><a href="#BIOS提供的功能和作用？" class="headerlink" title="BIOS提供的功能和作用？"></a>BIOS提供的功能和作用？</h3><ol>
<li>它会被加载到内存中吗？<br>会被加载到内容中，计算机加电以后会将BIOS的内容加载到内存中。CPU调转到内存中BOIS开始的位置执行。</li>
<li>操作系统对硬件的控制和访问与BIOS有关吗？还是BIOS仅用于系统初始化阶段？<br>有关，BIOS是一系列程序的集合，系统初始化的BIOS程序只是其中一个，对于不同的硬件，都有与其对应的BIOS程序。<strong>这里还是不太懂</strong></li>
</ol>
<h3 id="操作系统如何提供对硬件的保护？"><a href="#操作系统如何提供对硬件的保护？" class="headerlink" title="操作系统如何提供对硬件的保护？"></a>操作系统如何提供对硬件的保护？</h3><ol>
<li>是通过分段机制对特定指令的保护吗？<br>是的，IO地址的访问也有优先级，称为IOPL，只有当前代码的优先级高于IO地址优先级时（CPL&lt;=IOPL）才能访问。</li>
<li>如何避免应用层程序直接访问硬件？<br>应用层程序运行在特权级为3的情况下，IOPL一般是0，只有内核能访问。通过分段的优先级控制就能够防止应用层程序访问硬件。</li>
</ol>
<h3 id="ELF格式的细节？"><a href="#ELF格式的细节？" class="headerlink" title="ELF格式的细节？"></a>ELF格式的细节？</h3><ol>
<li>elf文件结构？如何解析？</li>
<li>elf内各段（segment）各节（section）的区别和联系？<br>segment是将多个section放在相同的段中，便于内存管理。section是指.data、.text、.bss等不同的程序节。</li>
</ol>
<h3 id="如何编写自己的bootloader程序？"><a href="#如何编写自己的bootloader程序？" class="headerlink" title="如何编写自己的bootloader程序？"></a>如何编写自己的bootloader程序？</h3><ol>
<li>相关指令、相关IO端口的作用？</li>
<li>intel 80386指令、AT&amp;T语法汇编知识？</li>
<li>实模式到保护模式的切换实现？</li>
<li>操作系统的加载实现？</li>
</ol>
<h3 id="如何初始化中断、键盘、显示器等等设备？"><a href="#如何初始化中断、键盘、显示器等等设备？" class="headerlink" title="如何初始化中断、键盘、显示器等等设备？"></a>如何初始化中断、键盘、显示器等等设备？</h3><ol>
<li>总线如何处理？</li>
<li>IO端口如何处理？</li>
<li>中断如何处理？</li>
<li>在i386模拟上实现并总结其原理。</li>
</ol>
<h3 id="分段模式如何识别不同的段？"><a href="#分段模式如何识别不同的段？" class="headerlink" title="分段模式如何识别不同的段？"></a>分段模式如何识别不同的段？</h3><ol>
<li>如何识别段栈段和数据段，指令一条指令，怎么判断指令中的寻址使用的是哪一个段选择符？<br>在访问内存的时候才涉及到段选择器的问题。intel 80386有默认的使用段寄存器的方式（在intel 80386参考文档的2.5节），当只指定的偏移，没有指定段寄存器的时候，按照下面的规则使用段寄存器：<ul>
<li>指令预获取、指令调转等等指令，使用CS</li>
<li>使用ESP、EBP作为基址寄存器访问内存的时候，使用SS</li>
<li>栈操作命令push、pop等，使用SS</li>
<li>字符串指令，使用ES</li>
<li>不在上面情况中的，使用DS</li>
</ul>
</li>
<li>不同的段是不是有不同多地址空间？<br>是的，一个段就是一个独立的地址空间。GDTR存储了GDT的基址，段寄存器*8+GDTR就是选择符的地址，选择符中有段的基址和偏移。段的基址是线形地址，就是说，这个基址不需要在经过分段基址的转换，直接由基址+偏移得到线形地址。</li>
<li>段和编译器得到的.text和.data等是不是有什么关系？<br>是等价的，不过.text和.data肯定分别放在CS和DS中，但是DS中不仅仅有.data。</li>
</ol>
<h3 id="如何实现不同的进程之间的内存隔离？"><a href="#如何实现不同的进程之间的内存隔离？" class="headerlink" title="如何实现不同的进程之间的内存隔离？"></a>如何实现不同的进程之间的内存隔离？</h3><ol>
<li>分段基址的物理空间重叠怎么处理？</li>
</ol>
<h2 id="milestone"><a href="#milestone" class="headerlink" title="milestone"></a>milestone</h2><ul>
<li>2019.11.04 开始进行ucore-os的开发和学习</li>
<li>2019.11.21 完成对C语言基础知识的复习，也学习了更多的计算机基础相关的知识，例如字节对齐、大端小端、字节序、字符编码等知识。<ul>
<li>未完成1：C语言高级语法总结、GCC扩展（内联汇编等等特性）</li>
<li>未完成2：标准库的使用，包括文件io、并发编程、内存分配等等</li>
</ul>
</li>
<li>2019.11.26 完成对Makefile的分析<ul>
<li>了解了make的基本语法，ld、gcc选项。</li>
<li>了解了ucore.img镜像的构建过程。主要学习make语法、如何编写makefile、以及gcc、ld编译的一些选项等。</li>
<li>了解了bootloader的结构</li>
</ul>
</li>
</ul>

</article>
                </article>
          </main>
          <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Bright<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
<script src="/js/script.js"></script>
    </body>

</html>